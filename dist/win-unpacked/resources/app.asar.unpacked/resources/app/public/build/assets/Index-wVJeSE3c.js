import{b as D,r as u,j as e,H as L,L as x,a as h}from"./app-BndNHLne.js";import{A as z}from"./authenticated-layout-o3ZVkSEy.js";import{B as a}from"./button-B938siKt.js";import{I as H}from"./input-7eto-rc8.js";import{L as b}from"./label-CIW_vp9F.js";import{B as S}from"./badge-nSDNWomG.js";import{C,a as w,b as F,d as _,c as I}from"./card-BXOJrilN.js";import{T as $,a as R,b as T,c,d as M,e as i}from"./table-BlxktNVL.js";import{P as A,S as V,a as q,b as G,c as K,d as p}from"./select-WmQj3lC4.js";import{F as O}from"./filter-DR27Bd-Q.js";import{S as X,X as J}from"./app-header-layout-DF_mBwyX.js";import{E as Q}from"./eye-NfPWzyT0.js";import{S as U}from"./square-pen-CUbqWbl4.js";/* empty css            */import"./index-DI4Ye8VL.js";import"./index-QVslWZ3W.js";import"./check-BCEkxITN.js";import"./app-logo-icon-Dajt3FdR.js";const W=[{title:"Panel de Control",href:"/dashboard"},{title:"Almacenes",href:"/warehouses"}];function pe({warehouses:f,pagination:r,filters:d}){const{errors:o,flash:m}=D().props,[l,N]=u.useState(d.search||""),[n,g]=u.useState(()=>d.status!==void 0&&d.status!==null?d.status?"true":"false":"all"),[j,k]=u.useState(!1);console.log("Received filters:",d);const P=()=>{const s={};l&&(s.search=l),n!=="all"&&(s.status=n==="true"),h.get("/warehouses",s,{preserveState:!0,preserveScroll:!0})},v=()=>{P()},B=s=>{g(s);const t={};l&&(t.search=l),s!=="all"&&(t.status=s==="true"),console.log("Applying filters:",t),h.get("/warehouses",t,{preserveState:!0,preserveScroll:!0})},E=()=>{N(""),g("all"),h.get("/warehouses",{},{preserveState:!0,preserveScroll:!0})},y=s=>{const t={page:s};l&&(t.search=l),n!=="all"&&(t.status=n==="true"),h.get("/warehouses",t,{preserveState:!0,preserveScroll:!0})};return e.jsxs(z,{breadcrumbs:W,children:[e.jsx(L,{title:"Almacenes"}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900 dark:text-gray-100",children:"Almacenes"}),e.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:"Gestiona los almacenes del sistema de inventario"})]}),e.jsx(x,{href:"/warehouses/create",children:e.jsxs(a,{children:[e.jsx(A,{className:"h-4 w-4 mr-2"}),"Nuevo Almacén"]})})]}),(m==null?void 0:m.success)&&e.jsx("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-md",children:m.success}),(o==null?void 0:o.error)&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md",children:o.error}),e.jsxs(C,{className:"shadow-sm",children:[e.jsx(w,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(F,{className:"text-lg",children:"Filtros"}),e.jsxs(a,{variant:"ghost",size:"sm",onClick:()=>k(!j),children:[e.jsx(O,{className:"h-4 w-4 mr-2"}),j?"Ocultar":"Mostrar"," Filtros"]})]})}),j&&e.jsx(_,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(b,{htmlFor:"search",children:"Buscar"}),e.jsxs("div",{className:"relative",children:[e.jsx(X,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),e.jsx(H,{id:"search",placeholder:"Buscar por nombre, código o descripción...",value:l,onChange:s=>N(s.target.value),className:"pl-10",onKeyDown:s=>s.key==="Enter"&&v()})]})]}),e.jsxs("div",{children:[e.jsx(b,{htmlFor:"status",children:"Estado"}),e.jsxs(V,{value:n,onValueChange:B,children:[e.jsx(q,{children:e.jsx(G,{placeholder:"Seleccionar estado"})}),e.jsxs(K,{children:[e.jsx(p,{value:"all",children:"Todos"}),e.jsx(p,{value:"true",children:"Activo"}),e.jsx(p,{value:"false",children:"Inactivo"})]})]})]}),e.jsxs("div",{className:"flex items-end space-x-2",children:[e.jsx(a,{onClick:v,className:"flex-1",children:"Buscar"}),e.jsx(a,{variant:"outline",onClick:E,children:e.jsx(J,{className:"h-4 w-4"})})]})]})})]}),e.jsxs(C,{className:"shadow-sm",children:[e.jsx(w,{children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsxs("div",{children:[e.jsx(F,{children:"Resultados"}),e.jsx(I,{children:r.total>0?`Mostrando ${r.from} - ${r.to} de ${r.total} almacenes`:"No se encontraron almacenes"})]})})}),e.jsx(_,{children:f.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"rounded-md border overflow-hidden",children:e.jsxs($,{children:[e.jsx(R,{children:e.jsxs(T,{children:[e.jsx(c,{className:"py-4",children:"Código"}),e.jsx(c,{className:"py-4",children:"Nombre"}),e.jsx(c,{className:"py-4",children:"Descripción"}),e.jsx(c,{className:"py-4",children:"Estado"}),e.jsx(c,{className:"py-4",children:"Por Defecto"}),e.jsx(c,{className:"py-4",children:"Fecha Creación"}),e.jsx(c,{className:"text-right py-4",children:"Acciones"})]})}),e.jsx(M,{children:f.map(s=>e.jsxs(T,{children:[e.jsx(i,{className:"font-mono text-sm py-4",children:s.code}),e.jsx(i,{className:"font-medium py-4",children:s.name}),e.jsx(i,{className:"max-w-xs truncate py-4",children:s.description||"-"}),e.jsx(i,{className:"py-4",children:e.jsx(S,{variant:s.status?"default":"secondary",children:s.status_text})}),e.jsx(i,{className:"py-4",children:e.jsx(S,{variant:s.default?"default":"outline",className:s.default?"bg-green-100 text-green-800 border-green-200":"",children:s.default_text})}),e.jsx(i,{className:"py-4",children:new Date(s.created_at).toLocaleDateString("es-ES")}),e.jsx(i,{className:"text-right py-4",children:e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsx(x,{href:`/warehouses/${s.id}`,children:e.jsx(a,{variant:"ghost",size:"sm",children:e.jsx(Q,{className:"h-4 w-4"})})}),e.jsx(x,{href:`/warehouses/${s.id}/edit`,children:e.jsx(a,{variant:"ghost",size:"sm",children:e.jsx(U,{className:"h-4 w-4"})})})]})})]},s.id))})]})}),r.last_page>1&&e.jsxs("div",{className:"flex items-center justify-between mt-4",children:[e.jsxs("div",{className:"text-sm text-gray-600 dark:text-gray-400",children:["Página ",r.current_page," de ",r.last_page]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(a,{variant:"outline",size:"sm",onClick:()=>y(r.current_page-1),disabled:r.current_page===1,children:"Anterior"}),e.jsx(a,{variant:"outline",size:"sm",onClick:()=>y(r.current_page+1),disabled:!r.has_more_pages,children:"Siguiente"})]})]})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-gray-500 mb-4",children:"No se encontraron almacenes"}),e.jsx(a,{asChild:!0,children:e.jsxs(x,{href:"/warehouses/create",children:[e.jsx(A,{className:"h-4 w-4 mr-2"}),"Crear Primer Almacén"]})})]})})]})]})]})}export{pe as default};
