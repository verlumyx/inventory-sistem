import{r as o,j as e,b as oe,H as ce,L as A,a as ne}from"./app-BndNHLne.js";import{A as de}from"./authenticated-layout-o3ZVkSEy.js";import{a as me,u as R,b as xe,c as n,d as T,B as u}from"./button-B938siKt.js";import{B as N}from"./badge-nSDNWomG.js";import{C as f,a as v,b,d as D,c as ge}from"./card-BXOJrilN.js";import{T as pe,a as he,b as _,c as x,d as je,e as g}from"./table-BlxktNVL.js";import{c as ue,a as Ne}from"./index-QVslWZ3W.js";import{c as P,R as fe,T as ve,a as be,W as De,C as ye,b as Ae,D as Ce,d as $,O as _e,P as C}from"./app-header-layout-DF_mBwyX.js";import{A as we}from"./arrow-left-BYeRaKVa.js";import{S as w}from"./square-pen-CUbqWbl4.js";import{C as S}from"./circle-check-big-6HIQxMB4.js";import{H as Se}from"./hash-D6Z-mBSJ.js";import{C as E}from"./calendar-DTg5heHS.js";/* empty css            */import"./index-DI4Ye8VL.js";import"./app-logo-icon-Dajt3FdR.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ee=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Re=me("MapPin",Ee);var F="AlertDialog",[Te,cs]=ue(F,[P]),c=P(),O=s=>{const{__scopeAlertDialog:t,...a}=s,r=c(t);return e.jsx(fe,{...r,...a,modal:!0})};O.displayName=F;var Pe="AlertDialogTrigger",L=o.forwardRef((s,t)=>{const{__scopeAlertDialog:a,...r}=s,l=c(a);return e.jsx(ve,{...l,...r,ref:t})});L.displayName=Pe;var $e="AlertDialogPortal",M=s=>{const{__scopeAlertDialog:t,...a}=s,r=c(t);return e.jsx(be,{...r,...a})};M.displayName=$e;var Fe="AlertDialogOverlay",k=o.forwardRef((s,t)=>{const{__scopeAlertDialog:a,...r}=s,l=c(a);return e.jsx(_e,{...l,...r,ref:t})});k.displayName=Fe;var p="AlertDialogContent",[Oe,Le]=Te(p),Me=xe("AlertDialogContent"),H=o.forwardRef((s,t)=>{const{__scopeAlertDialog:a,children:r,...l}=s,h=c(a),d=o.useRef(null),y=R(t,d),j=o.useRef(null);return e.jsx(De,{contentName:p,titleName:B,docsSlug:"alert-dialog",children:e.jsx(Oe,{scope:a,cancelRef:j,children:e.jsxs(ye,{role:"alertdialog",...h,...l,ref:y,onOpenAutoFocus:Ne(l.onOpenAutoFocus,i=>{var m;i.preventDefault(),(m=j.current)==null||m.focus({preventScroll:!0})}),onPointerDownOutside:i=>i.preventDefault(),onInteractOutside:i=>i.preventDefault(),children:[e.jsx(Me,{children:r}),e.jsx(He,{contentRef:d})]})})})});H.displayName=p;var B="AlertDialogTitle",z=o.forwardRef((s,t)=>{const{__scopeAlertDialog:a,...r}=s,l=c(a);return e.jsx(Ae,{...l,...r,ref:t})});z.displayName=B;var q="AlertDialogDescription",G=o.forwardRef((s,t)=>{const{__scopeAlertDialog:a,...r}=s,l=c(a);return e.jsx(Ce,{...l,...r,ref:t})});G.displayName=q;var ke="AlertDialogAction",I=o.forwardRef((s,t)=>{const{__scopeAlertDialog:a,...r}=s,l=c(a);return e.jsx($,{...l,...r,ref:t})});I.displayName=ke;var V="AlertDialogCancel",W=o.forwardRef((s,t)=>{const{__scopeAlertDialog:a,...r}=s,{cancelRef:l}=Le(V,a),h=c(a),d=R(t,l);return e.jsx($,{...h,...r,ref:d})});W.displayName=V;var He=({contentRef:s})=>{const t=`\`${p}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${p}\` by passing a \`${q}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${p}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return o.useEffect(()=>{var r;document.getElementById((r=s.current)==null?void 0:r.getAttribute("aria-describedby"))||console.warn(t)},[t,s]),null},Be=O,ze=L,qe=M,Y=k,U=H,J=I,K=W,Q=z,X=G;const Ge=Be,Ie=ze,Ve=qe,Z=o.forwardRef(({className:s,...t},a)=>e.jsx(Y,{className:n("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",s),...t,ref:a}));Z.displayName=Y.displayName;const ee=o.forwardRef(({className:s,...t},a)=>e.jsxs(Ve,{children:[e.jsx(Z,{}),e.jsx(U,{ref:a,className:n("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",s),...t})]}));ee.displayName=U.displayName;const se=({className:s,...t})=>e.jsx("div",{className:n("flex flex-col space-y-2 text-center sm:text-left",s),...t});se.displayName="AlertDialogHeader";const ae=({className:s,...t})=>e.jsx("div",{className:n("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",s),...t});ae.displayName="AlertDialogFooter";const te=o.forwardRef(({className:s,...t},a)=>e.jsx(Q,{ref:a,className:n("text-lg font-semibold",s),...t}));te.displayName=Q.displayName;const re=o.forwardRef(({className:s,...t},a)=>e.jsx(X,{ref:a,className:n("text-sm text-muted-foreground",s),...t}));re.displayName=X.displayName;const ie=o.forwardRef(({className:s,...t},a)=>e.jsx(J,{ref:a,className:n(T(),s),...t}));ie.displayName=J.displayName;const le=o.forwardRef(({className:s,...t},a)=>e.jsx(K,{ref:a,className:n(T({variant:"outline"}),"mt-2 sm:mt-0",s),...t}));le.displayName=K.displayName;function ns({entry:s,items:t,metadata:a}){const{flash:r,errors:l}=oe().props,[h,d]=o.useState(!1),y=()=>{ne.patch(route("entries.receive",s.id),{},{onSuccess:()=>{}}),d(!1)},j=[{title:"Panel de Control",href:"/dashboard"},{title:"Entradas",href:"/entries"},{title:s.code,href:`/entries/${s.id}`}];return e.jsxs(de,{breadcrumbs:j,children:[e.jsx(ce,{title:`Entrada - ${s.code}`}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("div",{className:"flex items-center space-x-4",children:e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-semibold text-gray-900 dark:text-gray-100",children:s.name}),e.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[e.jsx("span",{className:"text-sm font-mono text-gray-600 dark:text-gray-400",children:s.code}),e.jsx(N,{variant:s.status?"default":"secondary",className:s.status===1?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800",children:s.status_text})]})]})}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(A,{href:"/entries",children:e.jsxs(u,{variant:"outline",children:[e.jsx(we,{className:"h-4 w-4 mr-2"}),"Volver"]})}),s.status===0&&e.jsx(A,{href:route("entries.edit",s.id),children:e.jsxs(u,{children:[e.jsx(w,{className:"mr-2 h-4 w-4"}),"Editar"]})}),s.status===0&&e.jsxs(Ge,{open:h,onOpenChange:d,children:[e.jsx(Ie,{asChild:!0,children:e.jsxs(u,{className:"bg-green-600 hover:bg-green-700",children:[e.jsx(S,{className:"mr-2 h-4 w-4"}),"Recibir"]})}),e.jsxs(ee,{children:[e.jsxs(se,{children:[e.jsx(te,{children:"Confirmar Recepción"}),e.jsxs(re,{children:["¿Está seguro de que desea marcar la entrada ",e.jsx("strong",{children:s.code})," como recibida?",e.jsx("br",{}),"Esta acción no se puede deshacer."]})]}),e.jsxs(ae,{children:[e.jsx(le,{children:"Cancelar"}),e.jsx(ie,{onClick:y,className:"bg-green-600 hover:bg-green-700",children:"Sí, marcar como recibida"})]})]})]})]})]}),(r==null?void 0:r.success)&&e.jsxs("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-md flex items-center gap-2",children:[e.jsx(S,{className:"h-4 w-4"}),r.success]}),(r==null?void 0:r.error)&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md",children:r.error}),(l==null?void 0:l.error)&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-md",children:l.error}),e.jsxs("div",{className:"grid gap-6 md:grid-cols-2",children:[e.jsxs(f,{children:[e.jsx(v,{children:e.jsxs(b,{className:"flex items-center gap-2",children:[e.jsx(C,{className:"h-5 w-5"}),"Información de la Entrada"]})}),e.jsx(D,{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Nombre"}),e.jsx("p",{className:"text-gray-900 font-medium",children:s.name})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Código"}),e.jsx("p",{className:"text-gray-900 font-mono",children:s.code})]}),s.description&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Descripción"}),e.jsx("p",{className:"text-gray-900",children:s.description})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-gray-500",children:"Estado"}),e.jsx("div",{className:"mt-1",children:e.jsx(N,{variant:s.status?"default":"secondary",className:s.status?"bg-green-100 text-green-800":"",children:s.status_text})})]})]})})]}),e.jsxs(f,{children:[e.jsx(v,{children:e.jsxs(b,{className:"flex items-center gap-2",children:[e.jsx(Se,{className:"h-5 w-5"}),"Estadísticas"]})}),e.jsxs(D,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-blue-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:a.total_items}),e.jsx("div",{className:"text-sm text-blue-600",children:"Items"})]}),e.jsxs("div",{className:"text-center p-4 bg-green-50 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:a.total_amount.toLocaleString("es-ES",{minimumFractionDigits:2,maximumFractionDigits:2})}),e.jsx("div",{className:"text-sm text-green-600",children:"Cantidad Total"})]})]}),e.jsxs("div",{className:"space-y-2 pt-4 border-t",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(E,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-gray-500",children:"Creado:"}),e.jsx("span",{className:"font-medium",children:a.created_ago}),a.is_recently_created&&e.jsx(N,{variant:"outline",className:"text-xs",children:"Reciente"})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(E,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"text-gray-500",children:"Actualizado:"}),e.jsx("span",{className:"font-medium",children:a.updated_ago}),a.is_recently_updated&&e.jsx(N,{variant:"outline",className:"text-xs",children:"Reciente"})]})]})]})]})]}),e.jsxs(f,{children:[e.jsxs(v,{children:[e.jsxs(b,{className:"flex items-center gap-2",children:[e.jsx(C,{className:"h-5 w-5"}),"Items de la Entrada"]}),e.jsx(ge,{children:a.total_items>0?`${a.total_items} item${a.total_items!==1?"s":""} en esta entrada`:"No hay items en esta entrada"})]}),e.jsx(D,{children:t.length>0?e.jsxs("div",{className:"rounded-md border",children:[e.jsxs(pe,{children:[e.jsx(he,{children:e.jsxs(_,{children:[e.jsx(x,{className:"py-4",children:"Item"}),e.jsx(x,{className:"py-4",children:"Código"}),e.jsx(x,{className:"py-4",children:"Almacén"}),e.jsx(x,{className:"py-4",children:"Cantidad"}),e.jsx(x,{className:"py-4",children:"Precio Unit."}),e.jsx(x,{className:"py-4",children:"Total"})]})}),e.jsx(je,{children:t.map(i=>e.jsxs(_,{children:[e.jsx(g,{className:"py-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:i.item.name}),e.jsx("div",{className:"text-sm text-gray-500",children:i.item.display_name})]})}),e.jsx(g,{className:"font-mono py-4",children:i.item.code}),e.jsx(g,{className:"py-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Re,{className:"h-4 w-4 text-gray-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:i.warehouse.name}),e.jsx("div",{className:"text-sm text-gray-500",children:i.warehouse.code})]})]})}),e.jsxs(g,{className:"py-4",children:[e.jsx("div",{className:"font-medium",children:i.amount.toLocaleString("es-ES",{minimumFractionDigits:2,maximumFractionDigits:2})}),i.item.unit&&e.jsx("div",{className:"text-sm text-gray-500",children:i.item.unit})]}),e.jsx(g,{className:"py-4",children:i.item.price?e.jsxs("span",{className:"font-medium",children:["$",i.item.price.toLocaleString("es-ES",{minimumFractionDigits:2,maximumFractionDigits:2})]}):e.jsx("span",{className:"text-gray-400",children:"-"})}),e.jsx(g,{className:"py-4",children:i.item.price?e.jsxs("span",{className:"font-medium text-green-600",children:["$",(i.item.price*i.amount).toLocaleString("es-ES",{minimumFractionDigits:2,maximumFractionDigits:2})]}):e.jsx("span",{className:"text-gray-400",children:"-"})})]},i.id))})]}),e.jsxs("div",{className:"border-t bg-gray-50 p-4",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("div",{className:"font-medium",children:"Total de la Entrada:"}),e.jsxs("div",{className:"text-lg font-bold text-green-600",children:["$",t.reduce((i,m)=>i+(m.item.price?m.item.price*m.amount:0),0).toLocaleString("es-ES",{minimumFractionDigits:2,maximumFractionDigits:2})]})]}),e.jsx("div",{className:"flex justify-between items-center text-sm text-gray-600 mt-1",children:e.jsxs("div",{children:[a.total_items," item",a.total_items!==1?"s":""," • ",a.total_amount.toLocaleString("es-ES",{minimumFractionDigits:2,maximumFractionDigits:2})," unidades totales"]})})]})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx(C,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-4 text-lg font-semibold text-gray-900",children:"No hay items"}),e.jsx("p",{className:"mt-2 text-gray-500",children:"Esta entrada no tiene items asociados."}),e.jsx(A,{href:route("entries.edit",s.id),className:"mt-4 inline-block",children:e.jsxs(u,{variant:"outline",children:[e.jsx(w,{className:"mr-2 h-4 w-4"}),"Agregar Items"]})})]})})]}),e.jsxs(f,{children:[e.jsx(v,{children:e.jsx(b,{children:"Información Adicional"})}),e.jsx(D,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("label",{className:"font-medium text-gray-500",children:"ID de la Entrada"}),e.jsx("p",{className:"text-gray-900",children:s.id})]}),e.jsxs("div",{children:[e.jsx("label",{className:"font-medium text-gray-500",children:"Fecha de Creación"}),e.jsx("p",{className:"text-gray-900",children:new Date(s.created_at).toLocaleString("es-ES")})]}),e.jsxs("div",{children:[e.jsx("label",{className:"font-medium text-gray-500",children:"Última Modificación"}),e.jsx("p",{className:"text-gray-900",children:new Date(s.updated_at).toLocaleString("es-ES")})]})]})})]})]})]})}export{ns as default};
