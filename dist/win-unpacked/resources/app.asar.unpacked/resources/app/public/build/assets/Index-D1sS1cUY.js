import{b as I,r as x,j as e,H as P,L as m,a as h}from"./app-CDQDU1-Z.js";import{A,C as f,a as b,b as S,d as C}from"./card-BPvXLcXN.js";import{a as D,B as r}from"./app-logo-icon-DBxQkU93.js";import{I as L}from"./input-CBJR-IoQ.js";import{B as z,S as B}from"./badge-SZ_QnlOA.js";import{T as H,a as R,b as k,c as t,d as q,e as l}from"./table-BSg8ChaG.js";import{S as Q,a as $,b as V,c as G,d as j}from"./select-Cc2WnPwZ.js";import{P as w}from"./plus-C8NLMfhi.js";import{F as K,S as U}from"./search-DGl2RZcq.js";import{E as J}from"./eye-C4gEUw7o.js";/* empty css            */import"./app-sidebar-layout-CmHeVIkJ.js";import"./index-ZzJkojRU.js";import"./index-BLfVfbLY.js";import"./index-BeVMLVQb.js";/**
 * @license lucide-react v0.475.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=[["rect",{width:"5",height:"5",x:"3",y:"3",rx:"1",key:"1tu5fj"}],["rect",{width:"5",height:"5",x:"16",y:"3",rx:"1",key:"1v8r4q"}],["rect",{width:"5",height:"5",x:"3",y:"16",rx:"1",key:"1x03jg"}],["path",{d:"M21 16h-3a2 2 0 0 0-2 2v3",key:"177gqh"}],["path",{d:"M21 21v.01",key:"ents32"}],["path",{d:"M12 7v3a2 2 0 0 1-2 2H7",key:"8crl2c"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M12 3h.01",key:"n36tog"}],["path",{d:"M12 16v.01",key:"133mhm"}],["path",{d:"M16 12h1",key:"1slzba"}],["path",{d:"M21 12v.01",key:"1lwtk9"}],["path",{d:"M12 21v-1",key:"1880an"}]],W=D("QrCode",O);function xe({items:p,pagination:a,filters:d}){const{errors:X,flash:c}=I().props,[n,u]=x.useState(d.search||""),[o,g]=x.useState(()=>d.status!==void 0&&d.status!==null?d.status?"true":"false":"all"),[N,_]=x.useState(!1);console.log("Received filters:",d);const F=()=>{const s={};n&&(s.search=n),o!=="all"&&(s.status=o==="true"),h.get("/items",s,{preserveState:!0,preserveScroll:!0})},y=()=>{F()},T=s=>{g(s);const i={};n&&(i.search=n),s!=="all"&&(i.status=s==="true"),console.log("Applying filters:",i),h.get("/items",i,{preserveState:!0,preserveScroll:!0})},M=()=>{u(""),g("all"),h.get("/items",{},{preserveState:!0,preserveScroll:!0})},v=s=>{const i={page:s};n&&(i.search=n),o!=="all"&&(i.status=o==="true"),h.get("/items",i,{preserveState:!0,preserveScroll:!0})},E=[{name:"Panel de Control",href:"/dashboard"},{name:"Items",href:"/items",current:!0}];return e.jsxs(A,{breadcrumbs:E,children:[e.jsx(P,{title:"Items"}),e.jsxs("div",{className:"p-6 space-y-6",children:[(c==null?void 0:c.success)&&e.jsx("div",{className:"bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded",children:c.success}),(c==null?void 0:c.error)&&e.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded",children:c.error}),e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Artículos"}),e.jsx("p",{className:"text-gray-600 mt-1",children:"Gestiona los almacenes del sistema de inventario"})]}),e.jsx(r,{asChild:!0,children:e.jsxs(m,{href:"/items/create",children:[e.jsx(w,{className:"h-4 w-4 mr-2"}),"Nuevo Artículo"]})})]}),e.jsxs(f,{className:"shadow-sm",children:[e.jsx(b,{className:"pb-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(S,{className:"text-lg",children:"Filtros"}),e.jsxs(r,{variant:"ghost",size:"sm",onClick:()=>_(!N),children:[e.jsx(K,{className:"h-4 w-4 mr-2"}),"Mostrar Filtros"]})]})}),e.jsxs(C,{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx(L,{placeholder:"Buscar por nombre, código, descripción o QR...",value:n,onChange:s=>u(s.target.value),onKeyDown:s=>s.key==="Enter"&&y()})}),e.jsxs(r,{onClick:y,children:[e.jsx(U,{className:"h-4 w-4 mr-2"}),"Buscar"]})]}),N&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 pt-4 border-t",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estado"}),e.jsxs(Q,{value:o,onValueChange:T,children:[e.jsx($,{children:e.jsx(V,{placeholder:"Seleccionar estado"})}),e.jsxs(G,{children:[e.jsx(j,{value:"all",children:"Todos"}),e.jsx(j,{value:"true",children:"Activos"}),e.jsx(j,{value:"false",children:"Inactivos"})]})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(r,{variant:"outline",onClick:M,children:"Limpiar Filtros"})})]})]})]}),e.jsxs(f,{className:"shadow-sm",children:[e.jsx(b,{children:e.jsxs(S,{children:["Resultados",e.jsxs("span",{className:"text-sm font-normal text-gray-500 ml-2",children:["Mostrando ",a.from||0," - ",a.to||0," de ",a.total," items"]})]})}),e.jsx(C,{children:p.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"rounded-md border overflow-hidden",children:e.jsxs(H,{children:[e.jsx(R,{children:e.jsxs(k,{children:[e.jsx(t,{className:"py-4",children:"Código"}),e.jsx(t,{className:"py-4",children:"Nombre"}),e.jsx(t,{className:"py-4",children:"Precio"}),e.jsx(t,{className:"py-4",children:"Unidad"}),e.jsx(t,{className:"py-4",children:"Disponible"}),e.jsx(t,{className:"py-4",children:"QR Code"}),e.jsx(t,{className:"py-4",children:"Estado"}),e.jsx(t,{className:"py-4",children:"Fecha Creación"}),e.jsx(t,{className:"text-right py-4",children:"Acciones"})]})}),e.jsx(q,{children:p.map(s=>e.jsxs(k,{children:[e.jsx(l,{className:"font-mono text-sm py-4",children:s.code}),e.jsx(l,{className:"font-medium py-4",children:s.name}),e.jsx(l,{className:"py-4",children:s.price?e.jsxs("span",{className:"font-medium",children:["$",s.price.toLocaleString("es-ES",{minimumFractionDigits:2,maximumFractionDigits:2})]}):e.jsx("span",{className:"text-gray-400",children:"-"})}),e.jsx(l,{className:"py-4",children:s.unit||e.jsx("span",{className:"text-gray-400",children:"-"})}),e.jsx(l,{className:"py-4",children:e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:`font-medium ${s.total_stock>0?"text-green-700":"text-red-600"}`,children:s.total_stock.toLocaleString("es-ES",{minimumFractionDigits:2,maximumFractionDigits:2})}),e.jsx("span",{className:"text-gray-500 text-sm",children:s.unit||"unidades"})]})}),e.jsx(l,{className:"py-4",children:s.qr_code?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(W,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"font-mono text-xs",children:s.qr_code})]}):e.jsx("span",{className:"text-gray-400",children:"-"})}),e.jsx(l,{className:"py-4",children:e.jsx(z,{variant:s.status?"default":"secondary",children:s.status_text})}),e.jsx(l,{className:"py-4",children:new Date(s.created_at).toLocaleDateString("es-ES")}),e.jsx(l,{className:"text-right py-4",children:e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsx(m,{href:`/items/${s.id}`,children:e.jsx(r,{variant:"ghost",size:"sm",children:e.jsx(J,{className:"h-4 w-4"})})}),e.jsx(m,{href:`/items/${s.id}/edit`,children:e.jsx(r,{variant:"ghost",size:"sm",children:e.jsx(B,{className:"h-4 w-4"})})})]})})]},s.id))})]})}),a.last_page>1&&e.jsxs("div",{className:"flex items-center justify-between mt-6",children:[e.jsxs("div",{className:"text-sm text-gray-700",children:["Página ",a.current_page," de ",a.last_page]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(r,{variant:"outline",size:"sm",onClick:()=>v(a.current_page-1),disabled:a.current_page===1,children:"Anterior"}),e.jsx(r,{variant:"outline",size:"sm",onClick:()=>v(a.current_page+1),disabled:!a.has_more_pages,children:"Siguiente"})]})]})]}):e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-gray-500 mb-4",children:"No se encontraron items"}),e.jsx(r,{asChild:!0,children:e.jsxs(m,{href:"/items/create",children:[e.jsx(w,{className:"h-4 w-4 mr-2"}),"Crear Primer Item"]})})]})})]})]})]})}export{xe as default};
