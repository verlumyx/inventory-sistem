import{r as x,j as e,H as q,a as h,L as T}from"./app-Doa1X8LG.js";import{A as W}from"./authenticated-layout-zkXyR4IY.js";import{B as c}from"./button-D4rUH4JB.js";import{C as j,a as p,b as f,d as g,c as $}from"./card-DF370HhO.js";import{I as G}from"./input-Dc5R9TS5.js";import{B as m}from"./badge-BJmshktp.js";import{T as K,a as M,b as v,c as o,d as U,e as i}from"./table-DBCaEuI0.js";import{P as J,S as k,a as E,b as B,c as D,d as u}from"./select-ZapHPyF4.js";import{e as P,S as O}from"./app-header-layout-DeCsVdE4.js";import{F as Q}from"./filter-DarmveRt.js";import{E as X}from"./eye-CfbH9hpu.js";import{S as Y}from"./square-pen-Dxq6FGvn.js";/* empty css            */import"./index-Cxkacx_1.js";import"./index-CUR25A5V.js";import"./check-DpiK8D10.js";import"./app-logo-icon-CJVXHink.js";function pe({invoices:N,filters:r,pagination:t}){const[l,S]=x.useState(r.search||""),[b,A]=x.useState(!1),[n,w]=x.useState(r.warehouse_id?r.warehouse_id.toString():"all"),[d,y]=x.useState(r.status!==void 0?r.status.toString():"all"),_=s=>{s&&s.preventDefault();const a={};l&&(a.search=l),n!=="all"&&(a.warehouse_id=parseInt(n)),d!=="all"&&(a.status=parseInt(d)),h.get(route("invoices.index"),a,{preserveState:!0,replace:!0})},z=s=>{w(s);const a={};l&&(a.search=l),s!=="all"&&(a.warehouse_id=parseInt(s)),d!=="all"&&(a.status=parseInt(d)),h.get(route("invoices.index"),a,{preserveState:!0,replace:!0})},L=s=>{y(s);const a={};l&&(a.search=l),n!=="all"&&(a.warehouse_id=parseInt(n)),s!=="all"&&(a.status=parseInt(s)),h.get(route("invoices.index"),a,{preserveState:!0,replace:!0})},C=()=>{S(""),w("all"),y("all"),h.get(route("invoices.index"),{},{preserveState:!0,replace:!0})},F=!!(r.search||r.warehouse_id||r.status!==void 0),H=s=>new Intl.NumberFormat("es-ES",{style:"currency",currency:"USD"}).format(s),R=s=>new Date(s).toLocaleDateString("es-ES",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),I=s=>{const a={};l&&(a.search=l),n!=="all"&&(a.warehouse_id=parseInt(n)),d!=="all"&&(a.status=parseInt(d)),a.page=s,h.get(route("invoices.index"),a,{preserveState:!0,preserveScroll:!0})},V=[{title:"Panel de Control",href:"/dashboard"},{title:"Facturas",href:"/invoices"}];return e.jsxs(W,{breadcrumbs:V,children:[e.jsx(q,{title:"Facturas"}),e.jsxs("div",{className:"p-6 space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold tracking-tight",children:"Facturas"}),e.jsx("p",{className:"text-muted-foreground",children:"Gestiona las facturas de inventario y sus items"})]}),e.jsxs(c,{onClick:()=>h.visit(route("invoices.create")),children:[e.jsx(J,{className:"mr-2 h-4 w-4"}),"Nueva Factura"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:e.jsxs(j,{children:[e.jsxs(p,{className:"flex flex-row items-center justify-between space-y-0 pb-2",children:[e.jsx(f,{className:"text-sm font-medium",children:"Total Facturas"}),e.jsx(P,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsx(g,{children:e.jsx("div",{className:"text-2xl font-bold",children:t.total})})]})}),e.jsxs(j,{className:"mb-6",children:[e.jsx(p,{children:e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx(f,{children:"Buscar Facturas"}),e.jsx($,{children:"Encuentra facturas por código o almacén"})]}),e.jsxs(c,{variant:"ghost",size:"sm",onClick:()=>A(!b),children:[e.jsx(Q,{className:"h-4 w-4 mr-2"}),"Mostrar Filtros"]})]})}),e.jsxs(g,{className:"space-y-4",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsx(G,{placeholder:"Buscar por código de factura...",value:l,onChange:s=>S(s.target.value),onKeyDown:s=>s.key==="Enter"&&_()})}),e.jsxs(c,{onClick:_,children:[e.jsx(O,{className:"h-4 w-4 mr-2"}),"Buscar"]})]}),b&&e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 pt-4 border-t",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Almacén"}),e.jsxs(k,{value:n,onValueChange:z,children:[e.jsx(E,{children:e.jsx(B,{placeholder:"Seleccionar almacén"})}),e.jsx(D,{children:e.jsx(u,{value:"all",children:"Todos los almacenes"})})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Estado"}),e.jsxs(k,{value:d,onValueChange:L,children:[e.jsx(E,{children:e.jsx(B,{placeholder:"Seleccionar estado"})}),e.jsxs(D,{children:[e.jsx(u,{value:"all",children:"Todos los estados"}),e.jsx(u,{value:"0",children:"Por pagar"}),e.jsx(u,{value:"1",children:"Pagada"})]})]})]}),e.jsx("div",{className:"flex items-end",children:e.jsx(c,{variant:"outline",onClick:C,children:"Limpiar Filtros"})})]}),F&&e.jsxs("div",{className:"flex flex-wrap gap-2",children:[r.search&&e.jsxs(m,{variant:"secondary",children:["Búsqueda: ",r.search]}),r.warehouse_id&&e.jsxs(m,{variant:"secondary",children:["Almacén ID: ",r.warehouse_id]})]})]})]}),e.jsxs(j,{children:[e.jsx(p,{children:e.jsxs(f,{children:["Facturas (",t.from,"-",t.to," de ",t.total,")"]})}),e.jsxs(g,{children:[e.jsx("div",{className:"rounded-md border",children:e.jsxs(K,{children:[e.jsx(M,{children:e.jsxs(v,{children:[e.jsx(o,{children:"Código"}),e.jsx(o,{children:"Almacén"}),e.jsx(o,{children:"Estado"}),e.jsx(o,{children:"Items"}),e.jsx(o,{children:"Total"}),e.jsx(o,{children:"Fecha"}),e.jsx(o,{className:"w-[100px]",children:"Acciones"})]})}),e.jsx(U,{children:N.data.length===0?e.jsx(v,{children:e.jsx(i,{colSpan:7,className:"text-center py-8",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx(P,{className:"h-8 w-8 text-gray-400"}),e.jsx("p",{className:"text-gray-500",children:"No se encontraron facturas"}),F&&e.jsx(c,{variant:"outline",size:"sm",onClick:C,children:"Limpiar filtros"})]})})}):N.data.map(s=>e.jsxs(v,{children:[e.jsx(i,{className:"font-medium",children:s.code}),e.jsx(i,{children:e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:s.warehouse.name}),e.jsx("div",{className:"text-sm text-gray-500",children:s.warehouse.code})]})}),e.jsx(i,{children:e.jsx(m,{variant:s.is_paid?"default":"secondary",className:s.is_paid?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800",children:s.status_text})}),e.jsx(i,{children:e.jsxs(m,{variant:"outline",children:[s.items_count," items"]})}),e.jsx(i,{className:"font-medium",children:H(s.total_amount)}),e.jsx(i,{children:R(s.created_at)}),e.jsx(i,{children:e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsx(T,{href:`/invoices/${s.id}`,children:e.jsx(c,{variant:"ghost",size:"sm",children:e.jsx(X,{className:"h-4 w-4"})})}),s.can_edit&&e.jsx(T,{href:`/invoices/${s.id}/edit`,children:e.jsx(c,{variant:"ghost",size:"sm",children:e.jsx(Y,{className:"h-4 w-4"})})})]})})]},s.id))})]})}),t.last_page>1&&e.jsxs("div",{className:"flex items-center justify-between mt-6 pt-4 border-t",children:[e.jsxs("div",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Página ",t.current_page," de ",t.last_page]}),e.jsxs("div",{className:"flex space-x-2",children:[e.jsx(c,{variant:"outline",size:"sm",onClick:()=>I(t.current_page-1),disabled:t.current_page===1,children:"Anterior"}),e.jsx(c,{variant:"outline",size:"sm",onClick:()=>I(t.current_page+1),disabled:t.current_page===t.last_page,children:"Siguiente"})]})]})]})]})]})]})}export{pe as default};
